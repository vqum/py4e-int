(self["webpackChunkWebComponents"] = self["webpackChunkWebComponents"] || []).push([["runestone_lp_js_lp_js-node_modules_codemirror_lib_codemirror_css"],{

/***/ 28902:
/*!*************************************************!*\
  !*** ./node_modules/codemirror/mode/gas/gas.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: https://codemirror.net/LICENSE

(function(mod) {
  if (true) // CommonJS
    mod(__webpack_require__(/*! ../../lib/codemirror */ 4631));
  else {}
})(function(CodeMirror) {
"use strict";

CodeMirror.defineMode("gas", function(_config, parserConfig) {
  'use strict';

  // If an architecture is specified, its initialization function may
  // populate this array with custom parsing functions which will be
  // tried in the event that the standard functions do not find a match.
  var custom = [];

  // The symbol used to start a line comment changes based on the target
  // architecture.
  // If no architecture is pased in "parserConfig" then only multiline
  // comments will have syntax support.
  var lineCommentStartSymbol = "";

  // These directives are architecture independent.
  // Machine specific directives should go in their respective
  // architecture initialization function.
  // Reference:
  // http://sourceware.org/binutils/docs/as/Pseudo-Ops.html#Pseudo-Ops
  var directives = {
    ".abort" : "builtin",
    ".align" : "builtin",
    ".altmacro" : "builtin",
    ".ascii" : "builtin",
    ".asciz" : "builtin",
    ".balign" : "builtin",
    ".balignw" : "builtin",
    ".balignl" : "builtin",
    ".bundle_align_mode" : "builtin",
    ".bundle_lock" : "builtin",
    ".bundle_unlock" : "builtin",
    ".byte" : "builtin",
    ".cfi_startproc" : "builtin",
    ".comm" : "builtin",
    ".data" : "builtin",
    ".def" : "builtin",
    ".desc" : "builtin",
    ".dim" : "builtin",
    ".double" : "builtin",
    ".eject" : "builtin",
    ".else" : "builtin",
    ".elseif" : "builtin",
    ".end" : "builtin",
    ".endef" : "builtin",
    ".endfunc" : "builtin",
    ".endif" : "builtin",
    ".equ" : "builtin",
    ".equiv" : "builtin",
    ".eqv" : "builtin",
    ".err" : "builtin",
    ".error" : "builtin",
    ".exitm" : "builtin",
    ".extern" : "builtin",
    ".fail" : "builtin",
    ".file" : "builtin",
    ".fill" : "builtin",
    ".float" : "builtin",
    ".func" : "builtin",
    ".global" : "builtin",
    ".gnu_attribute" : "builtin",
    ".hidden" : "builtin",
    ".hword" : "builtin",
    ".ident" : "builtin",
    ".if" : "builtin",
    ".incbin" : "builtin",
    ".include" : "builtin",
    ".int" : "builtin",
    ".internal" : "builtin",
    ".irp" : "builtin",
    ".irpc" : "builtin",
    ".lcomm" : "builtin",
    ".lflags" : "builtin",
    ".line" : "builtin",
    ".linkonce" : "builtin",
    ".list" : "builtin",
    ".ln" : "builtin",
    ".loc" : "builtin",
    ".loc_mark_labels" : "builtin",
    ".local" : "builtin",
    ".long" : "builtin",
    ".macro" : "builtin",
    ".mri" : "builtin",
    ".noaltmacro" : "builtin",
    ".nolist" : "builtin",
    ".octa" : "builtin",
    ".offset" : "builtin",
    ".org" : "builtin",
    ".p2align" : "builtin",
    ".popsection" : "builtin",
    ".previous" : "builtin",
    ".print" : "builtin",
    ".protected" : "builtin",
    ".psize" : "builtin",
    ".purgem" : "builtin",
    ".pushsection" : "builtin",
    ".quad" : "builtin",
    ".reloc" : "builtin",
    ".rept" : "builtin",
    ".sbttl" : "builtin",
    ".scl" : "builtin",
    ".section" : "builtin",
    ".set" : "builtin",
    ".short" : "builtin",
    ".single" : "builtin",
    ".size" : "builtin",
    ".skip" : "builtin",
    ".sleb128" : "builtin",
    ".space" : "builtin",
    ".stab" : "builtin",
    ".string" : "builtin",
    ".struct" : "builtin",
    ".subsection" : "builtin",
    ".symver" : "builtin",
    ".tag" : "builtin",
    ".text" : "builtin",
    ".title" : "builtin",
    ".type" : "builtin",
    ".uleb128" : "builtin",
    ".val" : "builtin",
    ".version" : "builtin",
    ".vtable_entry" : "builtin",
    ".vtable_inherit" : "builtin",
    ".warning" : "builtin",
    ".weak" : "builtin",
    ".weakref" : "builtin",
    ".word" : "builtin"
  };

  var registers = {};

  function x86(_parserConfig) {
    lineCommentStartSymbol = "#";

    registers.ax  = "variable";
    registers.eax = "variable-2";
    registers.rax = "variable-3";

    registers.bx  = "variable";
    registers.ebx = "variable-2";
    registers.rbx = "variable-3";

    registers.cx  = "variable";
    registers.ecx = "variable-2";
    registers.rcx = "variable-3";

    registers.dx  = "variable";
    registers.edx = "variable-2";
    registers.rdx = "variable-3";

    registers.si  = "variable";
    registers.esi = "variable-2";
    registers.rsi = "variable-3";

    registers.di  = "variable";
    registers.edi = "variable-2";
    registers.rdi = "variable-3";

    registers.sp  = "variable";
    registers.esp = "variable-2";
    registers.rsp = "variable-3";

    registers.bp  = "variable";
    registers.ebp = "variable-2";
    registers.rbp = "variable-3";

    registers.ip  = "variable";
    registers.eip = "variable-2";
    registers.rip = "variable-3";

    registers.cs  = "keyword";
    registers.ds  = "keyword";
    registers.ss  = "keyword";
    registers.es  = "keyword";
    registers.fs  = "keyword";
    registers.gs  = "keyword";
  }

  function armv6(_parserConfig) {
    // Reference:
    // http://infocenter.arm.com/help/topic/com.arm.doc.qrc0001l/QRC0001_UAL.pdf
    // http://infocenter.arm.com/help/topic/com.arm.doc.ddi0301h/DDI0301H_arm1176jzfs_r0p7_trm.pdf
    lineCommentStartSymbol = "@";
    directives.syntax = "builtin";

    registers.r0  = "variable";
    registers.r1  = "variable";
    registers.r2  = "variable";
    registers.r3  = "variable";
    registers.r4  = "variable";
    registers.r5  = "variable";
    registers.r6  = "variable";
    registers.r7  = "variable";
    registers.r8  = "variable";
    registers.r9  = "variable";
    registers.r10 = "variable";
    registers.r11 = "variable";
    registers.r12 = "variable";

    registers.sp  = "variable-2";
    registers.lr  = "variable-2";
    registers.pc  = "variable-2";
    registers.r13 = registers.sp;
    registers.r14 = registers.lr;
    registers.r15 = registers.pc;

    custom.push(function(ch, stream) {
      if (ch === '#') {
        stream.eatWhile(/\w/);
        return "number";
      }
    });
  }

  var arch = (parserConfig.architecture || "x86").toLowerCase();
  if (arch === "x86") {
    x86(parserConfig);
  } else if (arch === "arm" || arch === "armv6") {
    armv6(parserConfig);
  }

  function nextUntilUnescaped(stream, end) {
    var escaped = false, next;
    while ((next = stream.next()) != null) {
      if (next === end && !escaped) {
        return false;
      }
      escaped = !escaped && next === "\\";
    }
    return escaped;
  }

  function clikeComment(stream, state) {
    var maybeEnd = false, ch;
    while ((ch = stream.next()) != null) {
      if (ch === "/" && maybeEnd) {
        state.tokenize = null;
        break;
      }
      maybeEnd = (ch === "*");
    }
    return "comment";
  }

  return {
    startState: function() {
      return {
        tokenize: null
      };
    },

    token: function(stream, state) {
      if (state.tokenize) {
        return state.tokenize(stream, state);
      }

      if (stream.eatSpace()) {
        return null;
      }

      var style, cur, ch = stream.next();

      if (ch === "/") {
        if (stream.eat("*")) {
          state.tokenize = clikeComment;
          return clikeComment(stream, state);
        }
      }

      if (ch === lineCommentStartSymbol) {
        stream.skipToEnd();
        return "comment";
      }

      if (ch === '"') {
        nextUntilUnescaped(stream, '"');
        return "string";
      }

      if (ch === '.') {
        stream.eatWhile(/\w/);
        cur = stream.current().toLowerCase();
        style = directives[cur];
        return style || null;
      }

      if (ch === '=') {
        stream.eatWhile(/\w/);
        return "tag";
      }

      if (ch === '{') {
        return "bracket";
      }

      if (ch === '}') {
        return "bracket";
      }

      if (/\d/.test(ch)) {
        if (ch === "0" && stream.eat("x")) {
          stream.eatWhile(/[0-9a-fA-F]/);
          return "number";
        }
        stream.eatWhile(/\d/);
        return "number";
      }

      if (/\w/.test(ch)) {
        stream.eatWhile(/\w/);
        if (stream.eat(":")) {
          return 'tag';
        }
        cur = stream.current().toLowerCase();
        style = registers[cur];
        return style || null;
      }

      for (var i = 0; i < custom.length; i++) {
        style = custom[i](ch, stream, state);
        if (style) {
          return style;
        }
      }
    },

    lineComment: lineCommentStartSymbol,
    blockCommentStart: "/*",
    blockCommentEnd: "*/"
  };
});

});


/***/ }),

/***/ 2013:
/*!*******************************!*\
  !*** ./runestone/lp/js/lp.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _common_js_runestonebase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/js/runestonebase */ 2568);
/* harmony import */ var codemirror__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! codemirror */ 4631);
/* harmony import */ var codemirror__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(codemirror__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var codemirror_mode_gas_gas_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! codemirror/mode/gas/gas.js */ 28902);
/* harmony import */ var codemirror_mode_gas_gas_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(codemirror_mode_gas_gas_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var codemirror_mode_python_python_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! codemirror/mode/python/python.js */ 5321);
/* harmony import */ var codemirror_mode_python_python_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(codemirror_mode_python_python_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var codemirror_mode_javascript_javascript_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! codemirror/mode/javascript/javascript.js */ 96876);
/* harmony import */ var codemirror_mode_javascript_javascript_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(codemirror_mode_javascript_javascript_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var codemirror_mode_sql_sql_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! codemirror/mode/sql/sql.js */ 54086);
/* harmony import */ var codemirror_mode_sql_sql_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(codemirror_mode_sql_sql_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var codemirror_mode_clike_clike_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! codemirror/mode/clike/clike.js */ 99762);
/* harmony import */ var codemirror_mode_clike_clike_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(codemirror_mode_clike_clike_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var codemirror_mode_octave_octave_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! codemirror/mode/octave/octave.js */ 15734);
/* harmony import */ var codemirror_mode_octave_octave_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(codemirror_mode_octave_octave_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var codemirror_lib_codemirror_css__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! codemirror/lib/codemirror.css */ 90464);
// .. Copyright (C) 2017 Bryan A. Jones.
//
//    This file is part of E-Book Binder.
//
//    E-Book Binder is free software: you can redistribute it and/or modify it
//    under the terms of the GNU General Public License as published by the Free
//    Software Foundation, either version 3 of the License, or (at your option)
//    any later version.
//
//    E-Book Binder is distributed in the hope that it will be useful, but WITHOUT
//    ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
//    FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
//    details.
//
//    You should have received a copy of the GNU General Public License along
//    with E-Book Binder.  If not, see <http://www.gnu.org/licenses/>.
//
// .. highlight:: javascript
//
// **************************************************************************************
// |docname| - JavaScript functions supporting immediate feedback to in-browser questions
// **************************************************************************************













// Constructor
// ===========
// Object containing all instances of LP problems. (I assume there is just one per page.)
window.LPList = {};

// FITB constructor
class LP extends _common_js_runestonebase__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(opts) {
        super(opts);
        this.useRunestoneServices = opts.useRunestoneServices;
        // Store the DOM element (the input) for the "Test" button.
        this.element = opts.orig;
        this.containerDiv = this.element;
        this.divid = this.element.id;
        // Store the DOM element (the textarea) where compile results will be displayed.
        this.resultElement = $(this.element).siblings(".lp-result");
        // Store the DOM element (a div) where feedback will be displayed.
        this.feedbackElement = $(this.element)
            .siblings(".lp-feedback")
            .children("div");
        // Use a nice editor.
        let that = this;
        this.textAreas = [];
        $(".code_snippet").each(function (index, element) {
            let editor = codemirror__WEBPACK_IMPORTED_MODULE_1___default().fromTextArea(element, {
                lineNumbers: true,
                mode: $(that.element).attr("data-lang"),
                indentUnit: 4,
                matchBrackets: true,
                autoMatchParens: true,
                extraKeys: { Tab: "indentMore", "Shift-Tab": "indentLess" },
            });
            // Make the editor resizable.
            $(editor.getWrapperElement()).resizable({
                resize: function () {
                    editor.setSize($(this).width(), $(this).height());
                    editor.refresh();
                },
            });
            // Keep track of it.
            that.textAreas.push(editor);
        });
        // Handle clicks to the "Save and run" button.
        $(this.element).click((eventObject) =>
            that.onSaveAndRun(eventObject).then(null)
        );
        this.checkServer("lp_build", true);
    }

    // Data structures:
    //
    // Format of data stored locally and on the server*::
    //
    //  -   answer: JSON-encoded string containing {
    //          code_snippets: [
    //              str, snippet 1, ...
    //          ],
    //          (optional) resultString: str, output from build.
    //      }
    //  -   correct: (optional) float, a percentage from 0 to 100.
    //  -   timestamp: date/time in UTC.
    //
    // Format of data sent to the server*::
    //
    //  -   answer: JSON-encoded string containing only the code_snippets
    //          array, not resultString. There's no point in sending the
    //          previous resultString, since the server will compute a new
    //          one.
    //  -   event: "lp_build"
    //  -   act: "", since the useinfo table requires it. It's not
    //          otherwise used.
    //  -   path: str, giving the relative path to this web page. Used
    //          to find the source code which produced this page in order
    //          to do snippet replacement.
    //  -   div_id: str, the div_id of this component.
    //
    // Format of data received from the server::
    //
    //  If there was an error:
    //  -   errors: [
    //          str, error message 1, ...
    //      ]
    //
    //  Otherwise:
    //  -   answer: JSON-encoded string containing {
    //          resultString: str, output from build.
    //          Note that the code_snippets aren't sent back, to save
    //              bandwidth.
    //      }
    //  -   correct: float, a percentage from 0 to 100.
    //  -   timestamp: str, the server's timestamp.
    //
    // * For simplicity, I omitted the common fields (course, etc.) and discussed only fields unique to this component.

    async onSaveAndRun(_eventObject) {
        // Prevent multiple click while the build is running.
        $(this.element).attr("disabled", true);
        $(this.resultElement).val("Building...");
        $(this.feedbackElement).text("").attr("");
        // Since the Save and run button was clicked, we assume the code snippets have been changed; therefore, don't store ``correct`` or ``answer.resultString`` because they are out of date.
        //
        // Store the answer as a string, since this is what goes in to / comes out from the database. We have to translate this back to a data structure when restoring from the db or local storage.
        let code_snippets = this.textareasToData();
        this.setLocalStorage({
            answer: JSON.stringify({ code_snippets: code_snippets }),
            timestamp: new Date(),
        });
        // Store the answer that the server returns, which includes additional data (correct/incorrect, feedback from the build, etc.).
        let serverAnswer;
        try {
            serverAnswer = await this.logBookEvent({
                event: "lp_build",
                answer: JSON.stringify(code_snippets),
                // This is required by useinfo, but not used.
                act: "",
                // Find the relative path to this web page. Slice off the leading ``/``.
                path: window.location.href
                    .replace(eBookConfig.app, "")
                    .slice(1),
                div_id: this.divid,
            });
        } catch (err) {
            $(this.feedbackElement)
                .val(`Error contacting server: {err}.`)
                .attr("class", "alert alert-danger");
            return;
        } finally {
            // Always re-enable the button after the server responds.
            $(this.element).attr("disabled", false);
        }
        serverAnswer = serverAnswer.detail;
        // The server doesn't return the ``code_snippets``, for efficiency. Include those. If an error was returned, note that there is no ``answer`` yet.
        if (!("answer" in serverAnswer)) {
            serverAnswer.answer = {};
        }
        serverAnswer.answer.code_snippets = code_snippets;
        this.displayAnswer(serverAnswer);
        // JSON-encode the answer for storage.
        serverAnswer.answer = JSON.stringify(serverAnswer.answer);
        this.setLocalStorage(serverAnswer);
    }

    // Given a single answer, display it.
    displayAnswer(data) {
        if ("errors" in data) {
            // Display any server-side errors. If this key is present, other keys won't be.
            $(this.feedbackElement)
                .text(data.errors.join("<br>"))
                .attr("class", "alert alert-danger");
        } else {
            // Display and color-code the results.
            $(this.resultElement).val(data.answer.resultString);
            if (data.correct == null) {
                $(this.feedbackElement)
                    .text("Response recorded.")
                    .attr("class", "alert alert-success");
            } else if (data.correct >= 100) {
                $(this.feedbackElement)
                    .text("Correct. Grade: " + data.correct + "%")
                    .attr("class", "alert alert-success");
            } else {
                $(this.feedbackElement)
                    .text("Incorrect. Grade: " + data.correct + "%")
                    .attr("class", "alert alert-danger");
            }
            // Scroll to the bottom of the results.
            $(this.resultElement).scrollTop(this.resultElement[0].scrollHeight);
        }
    }

    // Store the contents of each textarea into an array of strings.
    textareasToData() {
        return $.map(this.textAreas, function (obj, index) {
            // See https://codemirror.net/doc/manual.html#api.
            return obj.getValue();
        });
    }

    // Store an array of strings in ``data.code_snippets`` into each textarea.
    dataToTextareas(data) {
        // Find all code snippet textareas.
        $(this.textAreas).each(function (index, value) {
            // Silently ignore if ``data.answer.code_snippets`` or ``data.answer.code_snippets[index]`` isn't defined.
            value.setValue((data.answer.code_snippets || "")[index] || "");
        });
    }

    // Restore answers from storage retrieval done in RunestoneBase.
    restoreAnswers(data) {
        // We store the answer as a JSON-encoded string in the db / local storage. Restore the actual data structure from it.
        data.answer = JSON.parse(data.answer);
        this.dataToTextareas(data);
        this.displayAnswer(data);
    }

    checkLocalStorage() {
        // Loads previous answers from local storage if they exist.
        var storedData;
        if (localStorage.length > 0) {
            var key = this.localStorageKey();
            var ex = localStorage.getItem(key);
            if (ex !== null) {
                try {
                    storedData = JSON.parse(ex);
                } catch (err) {
                    // error while parsing; likely due to bad value stored in storage
                    console.log(err.message);
                    localStorage.removeItem(key);
                    return;
                }
                this.restoreAnswers(storedData);
            }
        }
    }

    setLocalStorage(data) {
        localStorage.setItem(this.localStorageKey(), JSON.stringify(data));
    }
}

// Initialization
// ==============
// Find the custom HTML tags and execute our code on them.
$(document).on("runestone:login-complete", function () {
    $("[data-component=lp_build]").each(function (index) {
        try {
            window.LPList[this.id] = new LP({
                orig: this,
                useRunestoneServices: eBookConfig.useRunestoneServices,
            });
        } catch (err) {
            console.log(`Error rendering LP Problem ${this.id}`);
        }
    });
});

if (typeof window.component_factory === "undefined") {
    window.component_factory = {};
}
window.component_factory["lp_build"] = function (opts) {
    return new LP(opts);
};


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicnVuZXN0b25lX2xwX2pzX2xwX2pzLW5vZGVfbW9kdWxlc19jb2RlbWlycm9yX2xpYl9jb2RlbWlycm9yX2Nzcy42MjFmNjg2ODQ3YjM5N2VjLmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7O0FBRUE7QUFDQSxNQUFNLElBQXVEO0FBQzdELFFBQVEsbUJBQU8sQ0FBQyxnQ0FBc0I7QUFDdEMsT0FBTyxFQUdhO0FBQ3BCLENBQUM7QUFDRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1CQUFtQjtBQUNuQjtBQUNBOztBQUVBLG1CQUFtQjtBQUNuQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNCQUFzQixtQkFBbUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDeFZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWE7O0FBRTZDO0FBQ3RCO0FBQ0E7QUFDTTtBQUNRO0FBQ2Q7QUFDSTtBQUNFO0FBQ0g7O0FBRXZDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCLGdFQUFhO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsOERBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsOENBQThDO0FBQzNFLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxR0FBcUc7QUFDckc7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsOEJBQThCO0FBQ25FO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFVBQVU7QUFDVjtBQUNBLGdEQUFnRCxJQUFJO0FBQ3BEO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixVQUFVO0FBQ1Ysc0RBQXNELFFBQVE7QUFDOUQ7QUFDQSxLQUFLO0FBQ0wsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9XZWJDb21wb25lbnRzLy4vbm9kZV9tb2R1bGVzL2NvZGVtaXJyb3IvbW9kZS9nYXMvZ2FzLmpzIiwid2VicGFjazovL1dlYkNvbXBvbmVudHMvLi9ydW5lc3RvbmUvbHAvanMvbHAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29kZU1pcnJvciwgY29weXJpZ2h0IChjKSBieSBNYXJpam4gSGF2ZXJiZWtlIGFuZCBvdGhlcnNcbi8vIERpc3RyaWJ1dGVkIHVuZGVyIGFuIE1JVCBsaWNlbnNlOiBodHRwczovL2NvZGVtaXJyb3IubmV0L0xJQ0VOU0VcblxuKGZ1bmN0aW9uKG1vZCkge1xuICBpZiAodHlwZW9mIGV4cG9ydHMgPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlID09IFwib2JqZWN0XCIpIC8vIENvbW1vbkpTXG4gICAgbW9kKHJlcXVpcmUoXCIuLi8uLi9saWIvY29kZW1pcnJvclwiKSk7XG4gIGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIC8vIEFNRFxuICAgIGRlZmluZShbXCIuLi8uLi9saWIvY29kZW1pcnJvclwiXSwgbW9kKTtcbiAgZWxzZSAvLyBQbGFpbiBicm93c2VyIGVudlxuICAgIG1vZChDb2RlTWlycm9yKTtcbn0pKGZ1bmN0aW9uKENvZGVNaXJyb3IpIHtcblwidXNlIHN0cmljdFwiO1xuXG5Db2RlTWlycm9yLmRlZmluZU1vZGUoXCJnYXNcIiwgZnVuY3Rpb24oX2NvbmZpZywgcGFyc2VyQ29uZmlnKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyBJZiBhbiBhcmNoaXRlY3R1cmUgaXMgc3BlY2lmaWVkLCBpdHMgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24gbWF5XG4gIC8vIHBvcHVsYXRlIHRoaXMgYXJyYXkgd2l0aCBjdXN0b20gcGFyc2luZyBmdW5jdGlvbnMgd2hpY2ggd2lsbCBiZVxuICAvLyB0cmllZCBpbiB0aGUgZXZlbnQgdGhhdCB0aGUgc3RhbmRhcmQgZnVuY3Rpb25zIGRvIG5vdCBmaW5kIGEgbWF0Y2guXG4gIHZhciBjdXN0b20gPSBbXTtcblxuICAvLyBUaGUgc3ltYm9sIHVzZWQgdG8gc3RhcnQgYSBsaW5lIGNvbW1lbnQgY2hhbmdlcyBiYXNlZCBvbiB0aGUgdGFyZ2V0XG4gIC8vIGFyY2hpdGVjdHVyZS5cbiAgLy8gSWYgbm8gYXJjaGl0ZWN0dXJlIGlzIHBhc2VkIGluIFwicGFyc2VyQ29uZmlnXCIgdGhlbiBvbmx5IG11bHRpbGluZVxuICAvLyBjb21tZW50cyB3aWxsIGhhdmUgc3ludGF4IHN1cHBvcnQuXG4gIHZhciBsaW5lQ29tbWVudFN0YXJ0U3ltYm9sID0gXCJcIjtcblxuICAvLyBUaGVzZSBkaXJlY3RpdmVzIGFyZSBhcmNoaXRlY3R1cmUgaW5kZXBlbmRlbnQuXG4gIC8vIE1hY2hpbmUgc3BlY2lmaWMgZGlyZWN0aXZlcyBzaG91bGQgZ28gaW4gdGhlaXIgcmVzcGVjdGl2ZVxuICAvLyBhcmNoaXRlY3R1cmUgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uXG4gIC8vIFJlZmVyZW5jZTpcbiAgLy8gaHR0cDovL3NvdXJjZXdhcmUub3JnL2JpbnV0aWxzL2RvY3MvYXMvUHNldWRvLU9wcy5odG1sI1BzZXVkby1PcHNcbiAgdmFyIGRpcmVjdGl2ZXMgPSB7XG4gICAgXCIuYWJvcnRcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLmFsaWduXCIgOiBcImJ1aWx0aW5cIixcbiAgICBcIi5hbHRtYWNyb1wiIDogXCJidWlsdGluXCIsXG4gICAgXCIuYXNjaWlcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLmFzY2l6XCIgOiBcImJ1aWx0aW5cIixcbiAgICBcIi5iYWxpZ25cIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLmJhbGlnbndcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLmJhbGlnbmxcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLmJ1bmRsZV9hbGlnbl9tb2RlXCIgOiBcImJ1aWx0aW5cIixcbiAgICBcIi5idW5kbGVfbG9ja1wiIDogXCJidWlsdGluXCIsXG4gICAgXCIuYnVuZGxlX3VubG9ja1wiIDogXCJidWlsdGluXCIsXG4gICAgXCIuYnl0ZVwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuY2ZpX3N0YXJ0cHJvY1wiIDogXCJidWlsdGluXCIsXG4gICAgXCIuY29tbVwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuZGF0YVwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuZGVmXCIgOiBcImJ1aWx0aW5cIixcbiAgICBcIi5kZXNjXCIgOiBcImJ1aWx0aW5cIixcbiAgICBcIi5kaW1cIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLmRvdWJsZVwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuZWplY3RcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLmVsc2VcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLmVsc2VpZlwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuZW5kXCIgOiBcImJ1aWx0aW5cIixcbiAgICBcIi5lbmRlZlwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuZW5kZnVuY1wiIDogXCJidWlsdGluXCIsXG4gICAgXCIuZW5kaWZcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLmVxdVwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuZXF1aXZcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLmVxdlwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuZXJyXCIgOiBcImJ1aWx0aW5cIixcbiAgICBcIi5lcnJvclwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuZXhpdG1cIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLmV4dGVyblwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuZmFpbFwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuZmlsZVwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuZmlsbFwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuZmxvYXRcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLmZ1bmNcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLmdsb2JhbFwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuZ251X2F0dHJpYnV0ZVwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuaGlkZGVuXCIgOiBcImJ1aWx0aW5cIixcbiAgICBcIi5od29yZFwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuaWRlbnRcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLmlmXCIgOiBcImJ1aWx0aW5cIixcbiAgICBcIi5pbmNiaW5cIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLmluY2x1ZGVcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLmludFwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuaW50ZXJuYWxcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLmlycFwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuaXJwY1wiIDogXCJidWlsdGluXCIsXG4gICAgXCIubGNvbW1cIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLmxmbGFnc1wiIDogXCJidWlsdGluXCIsXG4gICAgXCIubGluZVwiIDogXCJidWlsdGluXCIsXG4gICAgXCIubGlua29uY2VcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLmxpc3RcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLmxuXCIgOiBcImJ1aWx0aW5cIixcbiAgICBcIi5sb2NcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLmxvY19tYXJrX2xhYmVsc1wiIDogXCJidWlsdGluXCIsXG4gICAgXCIubG9jYWxcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLmxvbmdcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLm1hY3JvXCIgOiBcImJ1aWx0aW5cIixcbiAgICBcIi5tcmlcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLm5vYWx0bWFjcm9cIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLm5vbGlzdFwiIDogXCJidWlsdGluXCIsXG4gICAgXCIub2N0YVwiIDogXCJidWlsdGluXCIsXG4gICAgXCIub2Zmc2V0XCIgOiBcImJ1aWx0aW5cIixcbiAgICBcIi5vcmdcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLnAyYWxpZ25cIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLnBvcHNlY3Rpb25cIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLnByZXZpb3VzXCIgOiBcImJ1aWx0aW5cIixcbiAgICBcIi5wcmludFwiIDogXCJidWlsdGluXCIsXG4gICAgXCIucHJvdGVjdGVkXCIgOiBcImJ1aWx0aW5cIixcbiAgICBcIi5wc2l6ZVwiIDogXCJidWlsdGluXCIsXG4gICAgXCIucHVyZ2VtXCIgOiBcImJ1aWx0aW5cIixcbiAgICBcIi5wdXNoc2VjdGlvblwiIDogXCJidWlsdGluXCIsXG4gICAgXCIucXVhZFwiIDogXCJidWlsdGluXCIsXG4gICAgXCIucmVsb2NcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLnJlcHRcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLnNidHRsXCIgOiBcImJ1aWx0aW5cIixcbiAgICBcIi5zY2xcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLnNlY3Rpb25cIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLnNldFwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuc2hvcnRcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLnNpbmdsZVwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuc2l6ZVwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuc2tpcFwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuc2xlYjEyOFwiIDogXCJidWlsdGluXCIsXG4gICAgXCIuc3BhY2VcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLnN0YWJcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLnN0cmluZ1wiIDogXCJidWlsdGluXCIsXG4gICAgXCIuc3RydWN0XCIgOiBcImJ1aWx0aW5cIixcbiAgICBcIi5zdWJzZWN0aW9uXCIgOiBcImJ1aWx0aW5cIixcbiAgICBcIi5zeW12ZXJcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLnRhZ1wiIDogXCJidWlsdGluXCIsXG4gICAgXCIudGV4dFwiIDogXCJidWlsdGluXCIsXG4gICAgXCIudGl0bGVcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLnR5cGVcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLnVsZWIxMjhcIiA6IFwiYnVpbHRpblwiLFxuICAgIFwiLnZhbFwiIDogXCJidWlsdGluXCIsXG4gICAgXCIudmVyc2lvblwiIDogXCJidWlsdGluXCIsXG4gICAgXCIudnRhYmxlX2VudHJ5XCIgOiBcImJ1aWx0aW5cIixcbiAgICBcIi52dGFibGVfaW5oZXJpdFwiIDogXCJidWlsdGluXCIsXG4gICAgXCIud2FybmluZ1wiIDogXCJidWlsdGluXCIsXG4gICAgXCIud2Vha1wiIDogXCJidWlsdGluXCIsXG4gICAgXCIud2Vha3JlZlwiIDogXCJidWlsdGluXCIsXG4gICAgXCIud29yZFwiIDogXCJidWlsdGluXCJcbiAgfTtcblxuICB2YXIgcmVnaXN0ZXJzID0ge307XG5cbiAgZnVuY3Rpb24geDg2KF9wYXJzZXJDb25maWcpIHtcbiAgICBsaW5lQ29tbWVudFN0YXJ0U3ltYm9sID0gXCIjXCI7XG5cbiAgICByZWdpc3RlcnMuYXggID0gXCJ2YXJpYWJsZVwiO1xuICAgIHJlZ2lzdGVycy5lYXggPSBcInZhcmlhYmxlLTJcIjtcbiAgICByZWdpc3RlcnMucmF4ID0gXCJ2YXJpYWJsZS0zXCI7XG5cbiAgICByZWdpc3RlcnMuYnggID0gXCJ2YXJpYWJsZVwiO1xuICAgIHJlZ2lzdGVycy5lYnggPSBcInZhcmlhYmxlLTJcIjtcbiAgICByZWdpc3RlcnMucmJ4ID0gXCJ2YXJpYWJsZS0zXCI7XG5cbiAgICByZWdpc3RlcnMuY3ggID0gXCJ2YXJpYWJsZVwiO1xuICAgIHJlZ2lzdGVycy5lY3ggPSBcInZhcmlhYmxlLTJcIjtcbiAgICByZWdpc3RlcnMucmN4ID0gXCJ2YXJpYWJsZS0zXCI7XG5cbiAgICByZWdpc3RlcnMuZHggID0gXCJ2YXJpYWJsZVwiO1xuICAgIHJlZ2lzdGVycy5lZHggPSBcInZhcmlhYmxlLTJcIjtcbiAgICByZWdpc3RlcnMucmR4ID0gXCJ2YXJpYWJsZS0zXCI7XG5cbiAgICByZWdpc3RlcnMuc2kgID0gXCJ2YXJpYWJsZVwiO1xuICAgIHJlZ2lzdGVycy5lc2kgPSBcInZhcmlhYmxlLTJcIjtcbiAgICByZWdpc3RlcnMucnNpID0gXCJ2YXJpYWJsZS0zXCI7XG5cbiAgICByZWdpc3RlcnMuZGkgID0gXCJ2YXJpYWJsZVwiO1xuICAgIHJlZ2lzdGVycy5lZGkgPSBcInZhcmlhYmxlLTJcIjtcbiAgICByZWdpc3RlcnMucmRpID0gXCJ2YXJpYWJsZS0zXCI7XG5cbiAgICByZWdpc3RlcnMuc3AgID0gXCJ2YXJpYWJsZVwiO1xuICAgIHJlZ2lzdGVycy5lc3AgPSBcInZhcmlhYmxlLTJcIjtcbiAgICByZWdpc3RlcnMucnNwID0gXCJ2YXJpYWJsZS0zXCI7XG5cbiAgICByZWdpc3RlcnMuYnAgID0gXCJ2YXJpYWJsZVwiO1xuICAgIHJlZ2lzdGVycy5lYnAgPSBcInZhcmlhYmxlLTJcIjtcbiAgICByZWdpc3RlcnMucmJwID0gXCJ2YXJpYWJsZS0zXCI7XG5cbiAgICByZWdpc3RlcnMuaXAgID0gXCJ2YXJpYWJsZVwiO1xuICAgIHJlZ2lzdGVycy5laXAgPSBcInZhcmlhYmxlLTJcIjtcbiAgICByZWdpc3RlcnMucmlwID0gXCJ2YXJpYWJsZS0zXCI7XG5cbiAgICByZWdpc3RlcnMuY3MgID0gXCJrZXl3b3JkXCI7XG4gICAgcmVnaXN0ZXJzLmRzICA9IFwia2V5d29yZFwiO1xuICAgIHJlZ2lzdGVycy5zcyAgPSBcImtleXdvcmRcIjtcbiAgICByZWdpc3RlcnMuZXMgID0gXCJrZXl3b3JkXCI7XG4gICAgcmVnaXN0ZXJzLmZzICA9IFwia2V5d29yZFwiO1xuICAgIHJlZ2lzdGVycy5ncyAgPSBcImtleXdvcmRcIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFybXY2KF9wYXJzZXJDb25maWcpIHtcbiAgICAvLyBSZWZlcmVuY2U6XG4gICAgLy8gaHR0cDovL2luZm9jZW50ZXIuYXJtLmNvbS9oZWxwL3RvcGljL2NvbS5hcm0uZG9jLnFyYzAwMDFsL1FSQzAwMDFfVUFMLnBkZlxuICAgIC8vIGh0dHA6Ly9pbmZvY2VudGVyLmFybS5jb20vaGVscC90b3BpYy9jb20uYXJtLmRvYy5kZGkwMzAxaC9EREkwMzAxSF9hcm0xMTc2anpmc19yMHA3X3RybS5wZGZcbiAgICBsaW5lQ29tbWVudFN0YXJ0U3ltYm9sID0gXCJAXCI7XG4gICAgZGlyZWN0aXZlcy5zeW50YXggPSBcImJ1aWx0aW5cIjtcblxuICAgIHJlZ2lzdGVycy5yMCAgPSBcInZhcmlhYmxlXCI7XG4gICAgcmVnaXN0ZXJzLnIxICA9IFwidmFyaWFibGVcIjtcbiAgICByZWdpc3RlcnMucjIgID0gXCJ2YXJpYWJsZVwiO1xuICAgIHJlZ2lzdGVycy5yMyAgPSBcInZhcmlhYmxlXCI7XG4gICAgcmVnaXN0ZXJzLnI0ICA9IFwidmFyaWFibGVcIjtcbiAgICByZWdpc3RlcnMucjUgID0gXCJ2YXJpYWJsZVwiO1xuICAgIHJlZ2lzdGVycy5yNiAgPSBcInZhcmlhYmxlXCI7XG4gICAgcmVnaXN0ZXJzLnI3ICA9IFwidmFyaWFibGVcIjtcbiAgICByZWdpc3RlcnMucjggID0gXCJ2YXJpYWJsZVwiO1xuICAgIHJlZ2lzdGVycy5yOSAgPSBcInZhcmlhYmxlXCI7XG4gICAgcmVnaXN0ZXJzLnIxMCA9IFwidmFyaWFibGVcIjtcbiAgICByZWdpc3RlcnMucjExID0gXCJ2YXJpYWJsZVwiO1xuICAgIHJlZ2lzdGVycy5yMTIgPSBcInZhcmlhYmxlXCI7XG5cbiAgICByZWdpc3RlcnMuc3AgID0gXCJ2YXJpYWJsZS0yXCI7XG4gICAgcmVnaXN0ZXJzLmxyICA9IFwidmFyaWFibGUtMlwiO1xuICAgIHJlZ2lzdGVycy5wYyAgPSBcInZhcmlhYmxlLTJcIjtcbiAgICByZWdpc3RlcnMucjEzID0gcmVnaXN0ZXJzLnNwO1xuICAgIHJlZ2lzdGVycy5yMTQgPSByZWdpc3RlcnMubHI7XG4gICAgcmVnaXN0ZXJzLnIxNSA9IHJlZ2lzdGVycy5wYztcblxuICAgIGN1c3RvbS5wdXNoKGZ1bmN0aW9uKGNoLCBzdHJlYW0pIHtcbiAgICAgIGlmIChjaCA9PT0gJyMnKSB7XG4gICAgICAgIHN0cmVhbS5lYXRXaGlsZSgvXFx3Lyk7XG4gICAgICAgIHJldHVybiBcIm51bWJlclwiO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgdmFyIGFyY2ggPSAocGFyc2VyQ29uZmlnLmFyY2hpdGVjdHVyZSB8fCBcIng4NlwiKS50b0xvd2VyQ2FzZSgpO1xuICBpZiAoYXJjaCA9PT0gXCJ4ODZcIikge1xuICAgIHg4NihwYXJzZXJDb25maWcpO1xuICB9IGVsc2UgaWYgKGFyY2ggPT09IFwiYXJtXCIgfHwgYXJjaCA9PT0gXCJhcm12NlwiKSB7XG4gICAgYXJtdjYocGFyc2VyQ29uZmlnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5leHRVbnRpbFVuZXNjYXBlZChzdHJlYW0sIGVuZCkge1xuICAgIHZhciBlc2NhcGVkID0gZmFsc2UsIG5leHQ7XG4gICAgd2hpbGUgKChuZXh0ID0gc3RyZWFtLm5leHQoKSkgIT0gbnVsbCkge1xuICAgICAgaWYgKG5leHQgPT09IGVuZCAmJiAhZXNjYXBlZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBlc2NhcGVkID0gIWVzY2FwZWQgJiYgbmV4dCA9PT0gXCJcXFxcXCI7XG4gICAgfVxuICAgIHJldHVybiBlc2NhcGVkO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xpa2VDb21tZW50KHN0cmVhbSwgc3RhdGUpIHtcbiAgICB2YXIgbWF5YmVFbmQgPSBmYWxzZSwgY2g7XG4gICAgd2hpbGUgKChjaCA9IHN0cmVhbS5uZXh0KCkpICE9IG51bGwpIHtcbiAgICAgIGlmIChjaCA9PT0gXCIvXCIgJiYgbWF5YmVFbmQpIHtcbiAgICAgICAgc3RhdGUudG9rZW5pemUgPSBudWxsO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIG1heWJlRW5kID0gKGNoID09PSBcIipcIik7XG4gICAgfVxuICAgIHJldHVybiBcImNvbW1lbnRcIjtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgc3RhcnRTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0b2tlbml6ZTogbnVsbFxuICAgICAgfTtcbiAgICB9LFxuXG4gICAgdG9rZW46IGZ1bmN0aW9uKHN0cmVhbSwgc3RhdGUpIHtcbiAgICAgIGlmIChzdGF0ZS50b2tlbml6ZSkge1xuICAgICAgICByZXR1cm4gc3RhdGUudG9rZW5pemUoc3RyZWFtLCBzdGF0ZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdHJlYW0uZWF0U3BhY2UoKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdmFyIHN0eWxlLCBjdXIsIGNoID0gc3RyZWFtLm5leHQoKTtcblxuICAgICAgaWYgKGNoID09PSBcIi9cIikge1xuICAgICAgICBpZiAoc3RyZWFtLmVhdChcIipcIikpIHtcbiAgICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IGNsaWtlQ29tbWVudDtcbiAgICAgICAgICByZXR1cm4gY2xpa2VDb21tZW50KHN0cmVhbSwgc3RhdGUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjaCA9PT0gbGluZUNvbW1lbnRTdGFydFN5bWJvbCkge1xuICAgICAgICBzdHJlYW0uc2tpcFRvRW5kKCk7XG4gICAgICAgIHJldHVybiBcImNvbW1lbnRcIjtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoID09PSAnXCInKSB7XG4gICAgICAgIG5leHRVbnRpbFVuZXNjYXBlZChzdHJlYW0sICdcIicpO1xuICAgICAgICByZXR1cm4gXCJzdHJpbmdcIjtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoID09PSAnLicpIHtcbiAgICAgICAgc3RyZWFtLmVhdFdoaWxlKC9cXHcvKTtcbiAgICAgICAgY3VyID0gc3RyZWFtLmN1cnJlbnQoKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBzdHlsZSA9IGRpcmVjdGl2ZXNbY3VyXTtcbiAgICAgICAgcmV0dXJuIHN0eWxlIHx8IG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaCA9PT0gJz0nKSB7XG4gICAgICAgIHN0cmVhbS5lYXRXaGlsZSgvXFx3Lyk7XG4gICAgICAgIHJldHVybiBcInRhZ1wiO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2ggPT09ICd7Jykge1xuICAgICAgICByZXR1cm4gXCJicmFja2V0XCI7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaCA9PT0gJ30nKSB7XG4gICAgICAgIHJldHVybiBcImJyYWNrZXRcIjtcbiAgICAgIH1cblxuICAgICAgaWYgKC9cXGQvLnRlc3QoY2gpKSB7XG4gICAgICAgIGlmIChjaCA9PT0gXCIwXCIgJiYgc3RyZWFtLmVhdChcInhcIikpIHtcbiAgICAgICAgICBzdHJlYW0uZWF0V2hpbGUoL1swLTlhLWZBLUZdLyk7XG4gICAgICAgICAgcmV0dXJuIFwibnVtYmVyXCI7XG4gICAgICAgIH1cbiAgICAgICAgc3RyZWFtLmVhdFdoaWxlKC9cXGQvKTtcbiAgICAgICAgcmV0dXJuIFwibnVtYmVyXCI7XG4gICAgICB9XG5cbiAgICAgIGlmICgvXFx3Ly50ZXN0KGNoKSkge1xuICAgICAgICBzdHJlYW0uZWF0V2hpbGUoL1xcdy8pO1xuICAgICAgICBpZiAoc3RyZWFtLmVhdChcIjpcIikpIHtcbiAgICAgICAgICByZXR1cm4gJ3RhZyc7XG4gICAgICAgIH1cbiAgICAgICAgY3VyID0gc3RyZWFtLmN1cnJlbnQoKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBzdHlsZSA9IHJlZ2lzdGVyc1tjdXJdO1xuICAgICAgICByZXR1cm4gc3R5bGUgfHwgbnVsbDtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdXN0b20ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc3R5bGUgPSBjdXN0b21baV0oY2gsIHN0cmVhbSwgc3RhdGUpO1xuICAgICAgICBpZiAoc3R5bGUpIHtcbiAgICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgbGluZUNvbW1lbnQ6IGxpbmVDb21tZW50U3RhcnRTeW1ib2wsXG4gICAgYmxvY2tDb21tZW50U3RhcnQ6IFwiLypcIixcbiAgICBibG9ja0NvbW1lbnRFbmQ6IFwiKi9cIlxuICB9O1xufSk7XG5cbn0pO1xuIiwiLy8gLi4gQ29weXJpZ2h0IChDKSAyMDE3IEJyeWFuIEEuIEpvbmVzLlxuLy9cbi8vICAgIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIEUtQm9vayBCaW5kZXIuXG4vL1xuLy8gICAgRS1Cb29rIEJpbmRlciBpcyBmcmVlIHNvZnR3YXJlOiB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5IGl0XG4vLyAgICB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZVxuLy8gICAgU29mdHdhcmUgRm91bmRhdGlvbiwgZWl0aGVyIHZlcnNpb24gMyBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKVxuLy8gICAgYW55IGxhdGVyIHZlcnNpb24uXG4vL1xuLy8gICAgRS1Cb29rIEJpbmRlciBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLCBidXQgV0lUSE9VVFxuLy8gICAgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1Ncbi8vICAgIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmVcbi8vICAgIGRldGFpbHMuXG4vL1xuLy8gICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYWxvbmdcbi8vICAgIHdpdGggRS1Cb29rIEJpbmRlci4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi5cbi8vXG4vLyAuLiBoaWdobGlnaHQ6OiBqYXZhc2NyaXB0XG4vL1xuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbi8vIHxkb2NuYW1lfCAtIEphdmFTY3JpcHQgZnVuY3Rpb25zIHN1cHBvcnRpbmcgaW1tZWRpYXRlIGZlZWRiYWNrIHRvIGluLWJyb3dzZXIgcXVlc3Rpb25zXG4vLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXG5cInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IFJ1bmVzdG9uZUJhc2UgZnJvbSBcIi4uLy4uL2NvbW1vbi9qcy9ydW5lc3RvbmViYXNlXCI7XG5pbXBvcnQgQ29kZU1pcnJvciBmcm9tIFwiY29kZW1pcnJvclwiO1xuaW1wb3J0IFwiY29kZW1pcnJvci9tb2RlL2dhcy9nYXMuanNcIjtcbmltcG9ydCBcImNvZGVtaXJyb3IvbW9kZS9weXRob24vcHl0aG9uLmpzXCI7XG5pbXBvcnQgXCJjb2RlbWlycm9yL21vZGUvamF2YXNjcmlwdC9qYXZhc2NyaXB0LmpzXCI7XG5pbXBvcnQgXCJjb2RlbWlycm9yL21vZGUvc3FsL3NxbC5qc1wiO1xuaW1wb3J0IFwiY29kZW1pcnJvci9tb2RlL2NsaWtlL2NsaWtlLmpzXCI7XG5pbXBvcnQgXCJjb2RlbWlycm9yL21vZGUvb2N0YXZlL29jdGF2ZS5qc1wiO1xuaW1wb3J0IFwiY29kZW1pcnJvci9saWIvY29kZW1pcnJvci5jc3NcIjtcblxuLy8gQ29uc3RydWN0b3Jcbi8vID09PT09PT09PT09XG4vLyBPYmplY3QgY29udGFpbmluZyBhbGwgaW5zdGFuY2VzIG9mIExQIHByb2JsZW1zLiAoSSBhc3N1bWUgdGhlcmUgaXMganVzdCBvbmUgcGVyIHBhZ2UuKVxud2luZG93LkxQTGlzdCA9IHt9O1xuXG4vLyBGSVRCIGNvbnN0cnVjdG9yXG5jbGFzcyBMUCBleHRlbmRzIFJ1bmVzdG9uZUJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKG9wdHMpIHtcbiAgICAgICAgc3VwZXIob3B0cyk7XG4gICAgICAgIHRoaXMudXNlUnVuZXN0b25lU2VydmljZXMgPSBvcHRzLnVzZVJ1bmVzdG9uZVNlcnZpY2VzO1xuICAgICAgICAvLyBTdG9yZSB0aGUgRE9NIGVsZW1lbnQgKHRoZSBpbnB1dCkgZm9yIHRoZSBcIlRlc3RcIiBidXR0b24uXG4gICAgICAgIHRoaXMuZWxlbWVudCA9IG9wdHMub3JpZztcbiAgICAgICAgdGhpcy5jb250YWluZXJEaXYgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgIHRoaXMuZGl2aWQgPSB0aGlzLmVsZW1lbnQuaWQ7XG4gICAgICAgIC8vIFN0b3JlIHRoZSBET00gZWxlbWVudCAodGhlIHRleHRhcmVhKSB3aGVyZSBjb21waWxlIHJlc3VsdHMgd2lsbCBiZSBkaXNwbGF5ZWQuXG4gICAgICAgIHRoaXMucmVzdWx0RWxlbWVudCA9ICQodGhpcy5lbGVtZW50KS5zaWJsaW5ncyhcIi5scC1yZXN1bHRcIik7XG4gICAgICAgIC8vIFN0b3JlIHRoZSBET00gZWxlbWVudCAoYSBkaXYpIHdoZXJlIGZlZWRiYWNrIHdpbGwgYmUgZGlzcGxheWVkLlxuICAgICAgICB0aGlzLmZlZWRiYWNrRWxlbWVudCA9ICQodGhpcy5lbGVtZW50KVxuICAgICAgICAgICAgLnNpYmxpbmdzKFwiLmxwLWZlZWRiYWNrXCIpXG4gICAgICAgICAgICAuY2hpbGRyZW4oXCJkaXZcIik7XG4gICAgICAgIC8vIFVzZSBhIG5pY2UgZWRpdG9yLlxuICAgICAgICBsZXQgdGhhdCA9IHRoaXM7XG4gICAgICAgIHRoaXMudGV4dEFyZWFzID0gW107XG4gICAgICAgICQoXCIuY29kZV9zbmlwcGV0XCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KSB7XG4gICAgICAgICAgICBsZXQgZWRpdG9yID0gQ29kZU1pcnJvci5mcm9tVGV4dEFyZWEoZWxlbWVudCwge1xuICAgICAgICAgICAgICAgIGxpbmVOdW1iZXJzOiB0cnVlLFxuICAgICAgICAgICAgICAgIG1vZGU6ICQodGhhdC5lbGVtZW50KS5hdHRyKFwiZGF0YS1sYW5nXCIpLFxuICAgICAgICAgICAgICAgIGluZGVudFVuaXQ6IDQsXG4gICAgICAgICAgICAgICAgbWF0Y2hCcmFja2V0czogdHJ1ZSxcbiAgICAgICAgICAgICAgICBhdXRvTWF0Y2hQYXJlbnM6IHRydWUsXG4gICAgICAgICAgICAgICAgZXh0cmFLZXlzOiB7IFRhYjogXCJpbmRlbnRNb3JlXCIsIFwiU2hpZnQtVGFiXCI6IFwiaW5kZW50TGVzc1wiIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIE1ha2UgdGhlIGVkaXRvciByZXNpemFibGUuXG4gICAgICAgICAgICAkKGVkaXRvci5nZXRXcmFwcGVyRWxlbWVudCgpKS5yZXNpemFibGUoe1xuICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0U2l6ZSgkKHRoaXMpLndpZHRoKCksICQodGhpcykuaGVpZ2h0KCkpO1xuICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEtlZXAgdHJhY2sgb2YgaXQuXG4gICAgICAgICAgICB0aGF0LnRleHRBcmVhcy5wdXNoKGVkaXRvcik7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBIYW5kbGUgY2xpY2tzIHRvIHRoZSBcIlNhdmUgYW5kIHJ1blwiIGJ1dHRvbi5cbiAgICAgICAgJCh0aGlzLmVsZW1lbnQpLmNsaWNrKChldmVudE9iamVjdCkgPT5cbiAgICAgICAgICAgIHRoYXQub25TYXZlQW5kUnVuKGV2ZW50T2JqZWN0KS50aGVuKG51bGwpXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuY2hlY2tTZXJ2ZXIoXCJscF9idWlsZFwiLCB0cnVlKTtcbiAgICB9XG5cbiAgICAvLyBEYXRhIHN0cnVjdHVyZXM6XG4gICAgLy9cbiAgICAvLyBGb3JtYXQgb2YgZGF0YSBzdG9yZWQgbG9jYWxseSBhbmQgb24gdGhlIHNlcnZlcio6OlxuICAgIC8vXG4gICAgLy8gIC0gICBhbnN3ZXI6IEpTT04tZW5jb2RlZCBzdHJpbmcgY29udGFpbmluZyB7XG4gICAgLy8gICAgICAgICAgY29kZV9zbmlwcGV0czogW1xuICAgIC8vICAgICAgICAgICAgICBzdHIsIHNuaXBwZXQgMSwgLi4uXG4gICAgLy8gICAgICAgICAgXSxcbiAgICAvLyAgICAgICAgICAob3B0aW9uYWwpIHJlc3VsdFN0cmluZzogc3RyLCBvdXRwdXQgZnJvbSBidWlsZC5cbiAgICAvLyAgICAgIH1cbiAgICAvLyAgLSAgIGNvcnJlY3Q6IChvcHRpb25hbCkgZmxvYXQsIGEgcGVyY2VudGFnZSBmcm9tIDAgdG8gMTAwLlxuICAgIC8vICAtICAgdGltZXN0YW1wOiBkYXRlL3RpbWUgaW4gVVRDLlxuICAgIC8vXG4gICAgLy8gRm9ybWF0IG9mIGRhdGEgc2VudCB0byB0aGUgc2VydmVyKjo6XG4gICAgLy9cbiAgICAvLyAgLSAgIGFuc3dlcjogSlNPTi1lbmNvZGVkIHN0cmluZyBjb250YWluaW5nIG9ubHkgdGhlIGNvZGVfc25pcHBldHNcbiAgICAvLyAgICAgICAgICBhcnJheSwgbm90IHJlc3VsdFN0cmluZy4gVGhlcmUncyBubyBwb2ludCBpbiBzZW5kaW5nIHRoZVxuICAgIC8vICAgICAgICAgIHByZXZpb3VzIHJlc3VsdFN0cmluZywgc2luY2UgdGhlIHNlcnZlciB3aWxsIGNvbXB1dGUgYSBuZXdcbiAgICAvLyAgICAgICAgICBvbmUuXG4gICAgLy8gIC0gICBldmVudDogXCJscF9idWlsZFwiXG4gICAgLy8gIC0gICBhY3Q6IFwiXCIsIHNpbmNlIHRoZSB1c2VpbmZvIHRhYmxlIHJlcXVpcmVzIGl0LiBJdCdzIG5vdFxuICAgIC8vICAgICAgICAgIG90aGVyd2lzZSB1c2VkLlxuICAgIC8vICAtICAgcGF0aDogc3RyLCBnaXZpbmcgdGhlIHJlbGF0aXZlIHBhdGggdG8gdGhpcyB3ZWIgcGFnZS4gVXNlZFxuICAgIC8vICAgICAgICAgIHRvIGZpbmQgdGhlIHNvdXJjZSBjb2RlIHdoaWNoIHByb2R1Y2VkIHRoaXMgcGFnZSBpbiBvcmRlclxuICAgIC8vICAgICAgICAgIHRvIGRvIHNuaXBwZXQgcmVwbGFjZW1lbnQuXG4gICAgLy8gIC0gICBkaXZfaWQ6IHN0ciwgdGhlIGRpdl9pZCBvZiB0aGlzIGNvbXBvbmVudC5cbiAgICAvL1xuICAgIC8vIEZvcm1hdCBvZiBkYXRhIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlcjo6XG4gICAgLy9cbiAgICAvLyAgSWYgdGhlcmUgd2FzIGFuIGVycm9yOlxuICAgIC8vICAtICAgZXJyb3JzOiBbXG4gICAgLy8gICAgICAgICAgc3RyLCBlcnJvciBtZXNzYWdlIDEsIC4uLlxuICAgIC8vICAgICAgXVxuICAgIC8vXG4gICAgLy8gIE90aGVyd2lzZTpcbiAgICAvLyAgLSAgIGFuc3dlcjogSlNPTi1lbmNvZGVkIHN0cmluZyBjb250YWluaW5nIHtcbiAgICAvLyAgICAgICAgICByZXN1bHRTdHJpbmc6IHN0ciwgb3V0cHV0IGZyb20gYnVpbGQuXG4gICAgLy8gICAgICAgICAgTm90ZSB0aGF0IHRoZSBjb2RlX3NuaXBwZXRzIGFyZW4ndCBzZW50IGJhY2ssIHRvIHNhdmVcbiAgICAvLyAgICAgICAgICAgICAgYmFuZHdpZHRoLlxuICAgIC8vICAgICAgfVxuICAgIC8vICAtICAgY29ycmVjdDogZmxvYXQsIGEgcGVyY2VudGFnZSBmcm9tIDAgdG8gMTAwLlxuICAgIC8vICAtICAgdGltZXN0YW1wOiBzdHIsIHRoZSBzZXJ2ZXIncyB0aW1lc3RhbXAuXG4gICAgLy9cbiAgICAvLyAqIEZvciBzaW1wbGljaXR5LCBJIG9taXR0ZWQgdGhlIGNvbW1vbiBmaWVsZHMgKGNvdXJzZSwgZXRjLikgYW5kIGRpc2N1c3NlZCBvbmx5IGZpZWxkcyB1bmlxdWUgdG8gdGhpcyBjb21wb25lbnQuXG5cbiAgICBhc3luYyBvblNhdmVBbmRSdW4oX2V2ZW50T2JqZWN0KSB7XG4gICAgICAgIC8vIFByZXZlbnQgbXVsdGlwbGUgY2xpY2sgd2hpbGUgdGhlIGJ1aWxkIGlzIHJ1bm5pbmcuXG4gICAgICAgICQodGhpcy5lbGVtZW50KS5hdHRyKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG4gICAgICAgICQodGhpcy5yZXN1bHRFbGVtZW50KS52YWwoXCJCdWlsZGluZy4uLlwiKTtcbiAgICAgICAgJCh0aGlzLmZlZWRiYWNrRWxlbWVudCkudGV4dChcIlwiKS5hdHRyKFwiXCIpO1xuICAgICAgICAvLyBTaW5jZSB0aGUgU2F2ZSBhbmQgcnVuIGJ1dHRvbiB3YXMgY2xpY2tlZCwgd2UgYXNzdW1lIHRoZSBjb2RlIHNuaXBwZXRzIGhhdmUgYmVlbiBjaGFuZ2VkOyB0aGVyZWZvcmUsIGRvbid0IHN0b3JlIGBgY29ycmVjdGBgIG9yIGBgYW5zd2VyLnJlc3VsdFN0cmluZ2BgIGJlY2F1c2UgdGhleSBhcmUgb3V0IG9mIGRhdGUuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFN0b3JlIHRoZSBhbnN3ZXIgYXMgYSBzdHJpbmcsIHNpbmNlIHRoaXMgaXMgd2hhdCBnb2VzIGluIHRvIC8gY29tZXMgb3V0IGZyb20gdGhlIGRhdGFiYXNlLiBXZSBoYXZlIHRvIHRyYW5zbGF0ZSB0aGlzIGJhY2sgdG8gYSBkYXRhIHN0cnVjdHVyZSB3aGVuIHJlc3RvcmluZyBmcm9tIHRoZSBkYiBvciBsb2NhbCBzdG9yYWdlLlxuICAgICAgICBsZXQgY29kZV9zbmlwcGV0cyA9IHRoaXMudGV4dGFyZWFzVG9EYXRhKCk7XG4gICAgICAgIHRoaXMuc2V0TG9jYWxTdG9yYWdlKHtcbiAgICAgICAgICAgIGFuc3dlcjogSlNPTi5zdHJpbmdpZnkoeyBjb2RlX3NuaXBwZXRzOiBjb2RlX3NuaXBwZXRzIH0pLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gU3RvcmUgdGhlIGFuc3dlciB0aGF0IHRoZSBzZXJ2ZXIgcmV0dXJucywgd2hpY2ggaW5jbHVkZXMgYWRkaXRpb25hbCBkYXRhIChjb3JyZWN0L2luY29ycmVjdCwgZmVlZGJhY2sgZnJvbSB0aGUgYnVpbGQsIGV0Yy4pLlxuICAgICAgICBsZXQgc2VydmVyQW5zd2VyO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc2VydmVyQW5zd2VyID0gYXdhaXQgdGhpcy5sb2dCb29rRXZlbnQoe1xuICAgICAgICAgICAgICAgIGV2ZW50OiBcImxwX2J1aWxkXCIsXG4gICAgICAgICAgICAgICAgYW5zd2VyOiBKU09OLnN0cmluZ2lmeShjb2RlX3NuaXBwZXRzKSxcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIHJlcXVpcmVkIGJ5IHVzZWluZm8sIGJ1dCBub3QgdXNlZC5cbiAgICAgICAgICAgICAgICBhY3Q6IFwiXCIsXG4gICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgcmVsYXRpdmUgcGF0aCB0byB0aGlzIHdlYiBwYWdlLiBTbGljZSBvZmYgdGhlIGxlYWRpbmcgYGAvYGAuXG4gICAgICAgICAgICAgICAgcGF0aDogd2luZG93LmxvY2F0aW9uLmhyZWZcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoZUJvb2tDb25maWcuYXBwLCBcIlwiKVxuICAgICAgICAgICAgICAgICAgICAuc2xpY2UoMSksXG4gICAgICAgICAgICAgICAgZGl2X2lkOiB0aGlzLmRpdmlkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgJCh0aGlzLmZlZWRiYWNrRWxlbWVudClcbiAgICAgICAgICAgICAgICAudmFsKGBFcnJvciBjb250YWN0aW5nIHNlcnZlcjoge2Vycn0uYClcbiAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiYWxlcnQgYWxlcnQtZGFuZ2VyXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgLy8gQWx3YXlzIHJlLWVuYWJsZSB0aGUgYnV0dG9uIGFmdGVyIHRoZSBzZXJ2ZXIgcmVzcG9uZHMuXG4gICAgICAgICAgICAkKHRoaXMuZWxlbWVudCkuYXR0cihcImRpc2FibGVkXCIsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBzZXJ2ZXJBbnN3ZXIgPSBzZXJ2ZXJBbnN3ZXIuZGV0YWlsO1xuICAgICAgICAvLyBUaGUgc2VydmVyIGRvZXNuJ3QgcmV0dXJuIHRoZSBgYGNvZGVfc25pcHBldHNgYCwgZm9yIGVmZmljaWVuY3kuIEluY2x1ZGUgdGhvc2UuIElmIGFuIGVycm9yIHdhcyByZXR1cm5lZCwgbm90ZSB0aGF0IHRoZXJlIGlzIG5vIGBgYW5zd2VyYGAgeWV0LlxuICAgICAgICBpZiAoIShcImFuc3dlclwiIGluIHNlcnZlckFuc3dlcikpIHtcbiAgICAgICAgICAgIHNlcnZlckFuc3dlci5hbnN3ZXIgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBzZXJ2ZXJBbnN3ZXIuYW5zd2VyLmNvZGVfc25pcHBldHMgPSBjb2RlX3NuaXBwZXRzO1xuICAgICAgICB0aGlzLmRpc3BsYXlBbnN3ZXIoc2VydmVyQW5zd2VyKTtcbiAgICAgICAgLy8gSlNPTi1lbmNvZGUgdGhlIGFuc3dlciBmb3Igc3RvcmFnZS5cbiAgICAgICAgc2VydmVyQW5zd2VyLmFuc3dlciA9IEpTT04uc3RyaW5naWZ5KHNlcnZlckFuc3dlci5hbnN3ZXIpO1xuICAgICAgICB0aGlzLnNldExvY2FsU3RvcmFnZShzZXJ2ZXJBbnN3ZXIpO1xuICAgIH1cblxuICAgIC8vIEdpdmVuIGEgc2luZ2xlIGFuc3dlciwgZGlzcGxheSBpdC5cbiAgICBkaXNwbGF5QW5zd2VyKGRhdGEpIHtcbiAgICAgICAgaWYgKFwiZXJyb3JzXCIgaW4gZGF0YSkge1xuICAgICAgICAgICAgLy8gRGlzcGxheSBhbnkgc2VydmVyLXNpZGUgZXJyb3JzLiBJZiB0aGlzIGtleSBpcyBwcmVzZW50LCBvdGhlciBrZXlzIHdvbid0IGJlLlxuICAgICAgICAgICAgJCh0aGlzLmZlZWRiYWNrRWxlbWVudClcbiAgICAgICAgICAgICAgICAudGV4dChkYXRhLmVycm9ycy5qb2luKFwiPGJyPlwiKSlcbiAgICAgICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiYWxlcnQgYWxlcnQtZGFuZ2VyXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRGlzcGxheSBhbmQgY29sb3ItY29kZSB0aGUgcmVzdWx0cy5cbiAgICAgICAgICAgICQodGhpcy5yZXN1bHRFbGVtZW50KS52YWwoZGF0YS5hbnN3ZXIucmVzdWx0U3RyaW5nKTtcbiAgICAgICAgICAgIGlmIChkYXRhLmNvcnJlY3QgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICQodGhpcy5mZWVkYmFja0VsZW1lbnQpXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0KFwiUmVzcG9uc2UgcmVjb3JkZWQuXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJhbGVydCBhbGVydC1zdWNjZXNzXCIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLmNvcnJlY3QgPj0gMTAwKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzLmZlZWRiYWNrRWxlbWVudClcbiAgICAgICAgICAgICAgICAgICAgLnRleHQoXCJDb3JyZWN0LiBHcmFkZTogXCIgKyBkYXRhLmNvcnJlY3QgKyBcIiVcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImFsZXJ0IGFsZXJ0LXN1Y2Nlc3NcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQodGhpcy5mZWVkYmFja0VsZW1lbnQpXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0KFwiSW5jb3JyZWN0LiBHcmFkZTogXCIgKyBkYXRhLmNvcnJlY3QgKyBcIiVcIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImFsZXJ0IGFsZXJ0LWRhbmdlclwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNjcm9sbCB0byB0aGUgYm90dG9tIG9mIHRoZSByZXN1bHRzLlxuICAgICAgICAgICAgJCh0aGlzLnJlc3VsdEVsZW1lbnQpLnNjcm9sbFRvcCh0aGlzLnJlc3VsdEVsZW1lbnRbMF0uc2Nyb2xsSGVpZ2h0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFN0b3JlIHRoZSBjb250ZW50cyBvZiBlYWNoIHRleHRhcmVhIGludG8gYW4gYXJyYXkgb2Ygc3RyaW5ncy5cbiAgICB0ZXh0YXJlYXNUb0RhdGEoKSB7XG4gICAgICAgIHJldHVybiAkLm1hcCh0aGlzLnRleHRBcmVhcywgZnVuY3Rpb24gKG9iaiwgaW5kZXgpIHtcbiAgICAgICAgICAgIC8vIFNlZSBodHRwczovL2NvZGVtaXJyb3IubmV0L2RvYy9tYW51YWwuaHRtbCNhcGkuXG4gICAgICAgICAgICByZXR1cm4gb2JqLmdldFZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFN0b3JlIGFuIGFycmF5IG9mIHN0cmluZ3MgaW4gYGBkYXRhLmNvZGVfc25pcHBldHNgYCBpbnRvIGVhY2ggdGV4dGFyZWEuXG4gICAgZGF0YVRvVGV4dGFyZWFzKGRhdGEpIHtcbiAgICAgICAgLy8gRmluZCBhbGwgY29kZSBzbmlwcGV0IHRleHRhcmVhcy5cbiAgICAgICAgJCh0aGlzLnRleHRBcmVhcykuZWFjaChmdW5jdGlvbiAoaW5kZXgsIHZhbHVlKSB7XG4gICAgICAgICAgICAvLyBTaWxlbnRseSBpZ25vcmUgaWYgYGBkYXRhLmFuc3dlci5jb2RlX3NuaXBwZXRzYGAgb3IgYGBkYXRhLmFuc3dlci5jb2RlX3NuaXBwZXRzW2luZGV4XWBgIGlzbid0IGRlZmluZWQuXG4gICAgICAgICAgICB2YWx1ZS5zZXRWYWx1ZSgoZGF0YS5hbnN3ZXIuY29kZV9zbmlwcGV0cyB8fCBcIlwiKVtpbmRleF0gfHwgXCJcIik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFJlc3RvcmUgYW5zd2VycyBmcm9tIHN0b3JhZ2UgcmV0cmlldmFsIGRvbmUgaW4gUnVuZXN0b25lQmFzZS5cbiAgICByZXN0b3JlQW5zd2VycyhkYXRhKSB7XG4gICAgICAgIC8vIFdlIHN0b3JlIHRoZSBhbnN3ZXIgYXMgYSBKU09OLWVuY29kZWQgc3RyaW5nIGluIHRoZSBkYiAvIGxvY2FsIHN0b3JhZ2UuIFJlc3RvcmUgdGhlIGFjdHVhbCBkYXRhIHN0cnVjdHVyZSBmcm9tIGl0LlxuICAgICAgICBkYXRhLmFuc3dlciA9IEpTT04ucGFyc2UoZGF0YS5hbnN3ZXIpO1xuICAgICAgICB0aGlzLmRhdGFUb1RleHRhcmVhcyhkYXRhKTtcbiAgICAgICAgdGhpcy5kaXNwbGF5QW5zd2VyKGRhdGEpO1xuICAgIH1cblxuICAgIGNoZWNrTG9jYWxTdG9yYWdlKCkge1xuICAgICAgICAvLyBMb2FkcyBwcmV2aW91cyBhbnN3ZXJzIGZyb20gbG9jYWwgc3RvcmFnZSBpZiB0aGV5IGV4aXN0LlxuICAgICAgICB2YXIgc3RvcmVkRGF0YTtcbiAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5sb2NhbFN0b3JhZ2VLZXkoKTtcbiAgICAgICAgICAgIHZhciBleCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgICAgICAgICBpZiAoZXggIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBzdG9yZWREYXRhID0gSlNPTi5wYXJzZShleCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVycm9yIHdoaWxlIHBhcnNpbmc7IGxpa2VseSBkdWUgdG8gYmFkIHZhbHVlIHN0b3JlZCBpbiBzdG9yYWdlXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlc3RvcmVBbnN3ZXJzKHN0b3JlZERhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0TG9jYWxTdG9yYWdlKGRhdGEpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5sb2NhbFN0b3JhZ2VLZXkoKSwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgIH1cbn1cblxuLy8gSW5pdGlhbGl6YXRpb25cbi8vID09PT09PT09PT09PT09XG4vLyBGaW5kIHRoZSBjdXN0b20gSFRNTCB0YWdzIGFuZCBleGVjdXRlIG91ciBjb2RlIG9uIHRoZW0uXG4kKGRvY3VtZW50KS5vbihcInJ1bmVzdG9uZTpsb2dpbi1jb21wbGV0ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgJChcIltkYXRhLWNvbXBvbmVudD1scF9idWlsZF1cIikuZWFjaChmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHdpbmRvdy5MUExpc3RbdGhpcy5pZF0gPSBuZXcgTFAoe1xuICAgICAgICAgICAgICAgIG9yaWc6IHRoaXMsXG4gICAgICAgICAgICAgICAgdXNlUnVuZXN0b25lU2VydmljZXM6IGVCb29rQ29uZmlnLnVzZVJ1bmVzdG9uZVNlcnZpY2VzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEVycm9yIHJlbmRlcmluZyBMUCBQcm9ibGVtICR7dGhpcy5pZH1gKTtcbiAgICAgICAgfVxuICAgIH0pO1xufSk7XG5cbmlmICh0eXBlb2Ygd2luZG93LmNvbXBvbmVudF9mYWN0b3J5ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgd2luZG93LmNvbXBvbmVudF9mYWN0b3J5ID0ge307XG59XG53aW5kb3cuY29tcG9uZW50X2ZhY3RvcnlbXCJscF9idWlsZFwiXSA9IGZ1bmN0aW9uIChvcHRzKSB7XG4gICAgcmV0dXJuIG5ldyBMUChvcHRzKTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=