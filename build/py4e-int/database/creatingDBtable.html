<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>21.4. Creating a database table &#8212; Python for Everybody - Interactive</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/matrixeq.css?v=58BC228F" />
    <link rel="stylesheet" type="text/css" href="../_static/webgldemo.css?v=B36B48D" />
    <link rel="stylesheet" type="text/css" href="../_static/webglinteractive.css?v=910DF1E1" />
    <link rel="stylesheet" type="text/css" href="../_static/CodeChat.css" />
    <link rel="stylesheet" type="text/css" href="../_static/accessibility.css?v=50109A2C" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/637.css?v=bddd2011b20db76a20ea" />
    <link rel="stylesheet" type="text/css" href="../_static/runestone.css?v=7c5388ad4389eae1a318" />



    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/matrixeq.js?v=D64CFA5A"></script>
    <script src="../_static/webglinteractive.js?v=2B768384"></script>
    <script src="../_static/FileSaver.min.js?v=8408C997"></script>
    <script src="../_static/html4css1.css?v=4533ACD3"></script>
    <script src="../_static/animationbase.js?v=A043C3A7"></script>
    <script src="../_static/runtime.bundle.js?v=aa7c717c38c5405af9e6"></script>
    <script src="../_static/637.bundle.js?v=1123ad75f9b821cdd636"></script>
    <script src="../_static/runestone.bundle.js?v=9c8e466e8cbed4a3af5a"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="21.5. Structured Query Language summary" href="SQLsummary.html" />
    <link rel="prev" title="21.3. Database Browser for SQLite" href="dbBrowserSQLite.html" />


<link rel="shortcut icon" href="/runestone/static/favicon.ico" type="image/ico" />


<script>
  eBookConfig = {};
  
    eBookConfig.useRunestoneServices = true;
    eBookConfig.host = 'http://127.0.0.1:8000' || 'http://127.0.0.1:8000';
    eBookConfig.app = eBookConfig.host+'/runestone';
    eBookConfig.course = 'py4e-int';
    eBookConfig.basecourse = 'py4e-int';
    eBookConfig.isLoggedIn = false;
    eBookConfig.enableCompareMe = eBookConfig.useRunestoneServices;
  
  eBookConfig.ajaxURL = eBookConfig.app+'/ajax/';
  eBookConfig.logLevel = 10;
  eBookConfig.loginRequired = false;
  eBookConfig.build_info = "unknown";
  eBookConfig.python3 = true;
  eBookConfig.acDefaultLanguage = '' ? '' : 'python'
  eBookConfig.runestone_version = '';
  eBookConfig.jobehost = '';
  eBookConfig.proxyuri_runs = '';
  eBookConfig.proxyuri_files = '';
  eBookConfig.enable_chatcodes = false ? false : false;

</script>

<!-- Ad Serving Headers Only serve ads to Anonymous Users -->



  </head><body>


<!-- Begin navbar -->
<div id="navbar" class="navbar navbar-default navbar-fixed-top" role="navigation">

  <div class="container">

    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type='button' class='navbar-toggle' data-toggle="collapse" data-target=".navbar-ex1-collapse" aria-label="navbar toggle">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div>
        
        
          <a class="brand-logo" href="/runestone/default/user/login" aria-label="Login"><img src="../_static/img/logo_small.png" alt=""></a>
        
        <a class="navbar-brand" href="../index.html" aria-label="index-page">
          
          py4e-int
        </a>
      </div>
    </div>



    <div class="navbar-collapse collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav navbar-right" >

        <li class="divider-vertical"></li>


        <!-- social media dropdown -->
        
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-globe" style="opacity: 0.9"><span class="visuallyhidden" aria-label="Social">Social</span></i>
          </a>
          <ul class="dropdown-menu social-menu">
              <li>
                <div>
                  <b>Runestone in social media:</b>
                </div>
                <a href="https://twitter.com/iRunestone">Follow @iRunestone</a>
                <a href="https://www.facebook.com/RunestoneInteractive">Our Facebook Page</a>
              </li>

              <li class="divider"></li>
              <li>
                <div>
                  <b>Help support us:</b>
                </div>
                <div>
                    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
                  <input type="hidden" name="cmd" value="_s-xclick">
                  <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
                  ">
                  <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                  <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                  </form>

                </div>
              </li>
          </ul>
        </li><!-- end social media dropdown -->

        <li class="divider-vertical"></li>

        <!-- search dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-search" style='opacity:0.9;'><span class="visuallyhidden" aria-label="Search">Search</span></i>
          </a>
          <ul class='dropdown-menu'>
            
                <li><a href='../index.html' aria-label="index-page">Table of Contents</a></li>
            
            <li><a href='../genindex.html'>Book Index</a></li>
            <li class="divider"></li>
            <li style="width: 240px;">
              <form class="navbar-search" style="margin:10px;" action="../search.html" method="get">
                <div class="input-group">
                  <input type="text" class="form-control" name="q" placeholder="Search this book" />
                  <span class="input-group-btn">
                    <button class="btn btn-primary" style="margin:0;" type="submit">
                      <i class="glyphicon glyphicon-search"></i>
                    </button>
                  </span>
                </div><!-- /input-group -->
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
            </li>
          </ul>
        </li>
        <!-- end search dropdown -->

        <li class="divider-vertical"></li>

        
        <!-- user account dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-user" style="opacity:0.9;"><span class="visuallyhidden" aria-label="User">User</span></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><span class='loggedinuser'></span></li>
            <li class="divider"></li>
            <li><a href='/runestone/assignments/chooseAssignment.html'>Assignments</a></li>
            <li><a href='/runestone/assignments/practice'>Practice</a></li>
            <li class="divider"></li>
            
            <li><a href='/runestone/default/courses'>Change Course</a></li>
			      <li class="divider"></li>
            <li id="ip_dropdown_link"><a href='/runestone/admin/index'>Instructor's Page</a></li>
            
            <li><a href='/runestone/dashboard/studentreport'>Progress Page</a></li>
            <li class="divider"></li>
            
            <li><a href="/runestone/default/user/profile" id="profilelink">Edit Profile</a></li>
            <li><a href="/runestone/default/user/change_password" id="passwordlink">Change Password</a></li>
            <li><a href="/runestone/default/user/register" id="registerlink">Register</a></li>
            
            <li class='loginout'><a href='#'>Login</a></li> <!-- correct link populated by addNavbarLoginLink() -->
			<!-- dark mode toggle -->
             <li><label class="theme-switch" for="checkbox">
					  <input type="checkbox" id="checkbox" onchange="runestoneComponents.switchTheme()" />
							<div class="slider round"></div>
					</label>Dark Mode</li>
			 </ul>
        </li>
        <!-- end user account dropdown -->
        
        <li class="divider-vertical"></li>
        <!-- <li id="scratch_ac_link"><a href="javascript:ACFactory.toggleScratchActivecode()">Scratch ActiveCode</a></li> -->

        <!-- <li class="dropdown">             -->
          <li id="scratch_ac_link" class="dropdown"><a href="javascript:runestoneComponents.popupScratchAC()">
              <i class="glyphicon glyphicon-pencil" style="opacity:0.9;"><span class="visuallyhidden" aria-label="Scratch Activecode" >Scratch Activecode</span></i></a></li>
        <!-- </li> -->

        <li class="divider-vertical"></li>

        
        <!-- help menu dropdown -->
        <li class="dropdown">
          <a class="dropdown-toggle" href="#" data-toggle="dropdown">
            <i class="glyphicon glyphicon-question-sign" style="opacity:0.9;"><span class="visuallyhidden" aria-label="Help">Help</span></i>
          </a>
          <ul class="dropdown-menu user-menu">
            <li><a href='http://runestoneinteractive.org/pages/faq.html'>FAQ</a></li>
            <li><a href='https://runestone.academy/runestone/static/instructorguide/index.html'>Instructors Guide</a></li>
            <li class="divider"></li>
            <li><a href='http://runestoneinteractive.org'>About Runestone</a></li>
            <li><a href='/runestone/default/reportabug?course=py4e-int&page=creatingDBtable'>Report A Problem</a></li>
          </ul>
        </li>
        <!-- end help menu dropdown -->

        <li class="divider-vertical"></li>
      
      </ul>

      <ul class="nav navbar-nav">
        <li class="divider-vertical"></li>
        
          
          <li class="divider-vertical"></li>
        
        <!-- 
          
  <li id="relations-prev" title="Previous Chapter - <span class="section-number">21.3. </span>Database Browser for SQLite" data-toggle="tooltip">
    <a href="dbBrowserSQLite.html" >
      <i class='glyphicon glyphicon-backward' style='opacity:0.9;'></i>
    </a>
  </li>
  
  <li id="relations-next" title='Next Chapter - <span class="section-number">21.5. </span>Structured Query Language summary' data-toggle="tooltip" >              
    <a href="SQLsummary.html" >
        <i class='glyphicon glyphicon-forward' style='opacity:0.9;'></i>
    </a>
  </li>
  <li class="divider-vertical"></li>

<script>
  opts = {'placement':'bottom',
          'selector': '',
          'delay': { show: 100, hide: 50}
         };

  window.addEventListener('load', (event) => {
    $('#relations-prev').tooltip(opts);
    $('#relations-next').tooltip(opts);
  });
</script>
        -->
        
          <li></li>
        
      </ul>
      </div> <!-- navbar-collapse -->
    </div> <!-- navbar -->
  </div> <!-- container -->


<div class="container" id="continue-reading"></div>

<div class="container" id="main-content" role="main">
  
<!-- Ad Serving for Runestone Campaign -->


  
  <div class="section" id="creating-a-database-table">
<h1><span class="section-number">21.4. </span>Creating a database table<a class="headerlink" href="#creating-a-database-table" title="Permalink to this headline">¶</a></h1>
<p id="index-0">Databases require more defined structure than Python lists or
dictionaries <a class="footnote-reference brackets" href="#id2" id="id1">1</a>.</p>
<p>When we create a database <em>table</em> we must tell the
database in advance the names of each of the <em>columns</em> in
the table and the type of data which we are planning to store in each
<em>column</em>. When the database software knows the type of
data in each column, it can choose the most efficient way to store and
look up the data based on the type of data.</p>

            <div class="runestone alert alert-warning">
            <ul data-component="multiplechoice" data-question_label="21.4.1" data-multipleanswers="false"  id="db_MC_tableTF"  style="visibility: hidden;">
            <p>Q-1: True or False? Python dictionaries require less defined structure than databases.</p>

            <li data-component="answer" data-correct id="db_MC_tableTF_opt_a">True</li><li data-component="feedback">Databases require more defined structure than Python lists or dictionaries.</li>
            
            <li data-component="answer"  id="db_MC_tableTF_opt_b">False</li><li data-component="feedback">Try again!</li>
            

            </ul>
            </div>
            <p>You can look at the various data types supported by SQLite at the
following url:</p>
<p><a class="reference external" href="http://www.sqlite.org/datatypes.html">http://www.sqlite.org/datatypes.html</a></p>
<p>Defining structure for your data up front may seem inconvenient at the
beginning, but the payoff is fast access to your data even when the
database contains a large amount of data.</p>
<p>The code to create a database file and a table named <code class="docutils literal notranslate"><span class="pre">Tracks</span></code>
with two columns in the database is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sqlite3</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;music.sqlite&#39;</span><span class="p">)</span>
<span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;DROP TABLE IF EXISTS Tracks&#39;</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE Tracks (title TEXT, plays INTEGER)&#39;</span><span class="p">)</span>

<span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">connect</span></code> operation makes a “connection” to the database
stored in the file <code class="docutils literal notranslate"><span class="pre">music.sqlite3</span></code> in the current directory.
If the file does not exist, it will be created. The reason this is
called a “connection” is that sometimes the database is stored on a
separate “database server” from the server on which we are running our
application. In our simple examples the database will just be a local
file in the same directory as the Python code we are running.</p>
<p>A <em>cursor</em> is like a file handle that we can use to
perform operations on the data stored in the database. Calling
<code class="docutils literal notranslate"><span class="pre">cursor()</span></code> is very similar conceptually to calling
<code class="docutils literal notranslate"><span class="pre">open()</span></code> when dealing with text files.</p>
<div class="figure align-default">
<img alt="A Database Cursor" src="../_images/cursor.svg" /></div>

            <div class="runestone alert alert-warning">
            <ul data-component="multiplechoice" data-question_label="21.4.2" data-multipleanswers="false"  id="dbCreate_MC_cursor"  style="visibility: hidden;">
            <p>Q-2: A cursor that we create to perform operations on the data within the database is very similar to which of the following?</p>

            <li data-component="answer"  id="dbCreate_MC_cursor_opt_a">Socket</li><li data-component="feedback">A network socket is a software structure within a network node of a computer network that serves as an endpoint for sending and receiving data across the network.</li>
            
            <li data-component="answer" data-correct id="dbCreate_MC_cursor_opt_b">File Handle</li><li data-component="feedback">A cursor is like a file handle. Calling cursor() is similar to calling open().</li>
            
            <li data-component="answer"  id="dbCreate_MC_cursor_opt_c">Script</li><li data-component="feedback">A script is a file containing code written in Python.</li>
            
            <li data-component="answer"  id="dbCreate_MC_cursor_opt_d">Module Object</li><li data-component="feedback">A value created by an import statement that provides access to the data and code defined in a module.</li>
            

            </ul>
            </div>
            <p>Once we have the cursor, we can begin to execute commands on the
contents of the database using the <code class="docutils literal notranslate"><span class="pre">execute()</span></code> method.</p>

<div class="runestone">
<ul data-component="dragndrop" data-question_label="21.4.3" id="db_connection_vs_cursor_dd"  style="visibility: hidden;">
    <span data-subcomponent="question">Q-3: Match the term to its definition</span>
	<span data-subcomponent=feedback>Read the section above to determine what a connection and cursor are used for.</span>

    <li data-subcomponent="draggable" id="db_connection_vs_cursor_dd_drag1">Connection</li>
    <li data-subcomponent="dropzone" for="db_connection_vs_cursor_dd_drag1">Handles establishing communication with the database, which may be on another server.</li>

    <li data-subcomponent="draggable" id="db_connection_vs_cursor_dd_drag2">Cursor</li>
    <li data-subcomponent="dropzone" for="db_connection_vs_cursor_dd_drag2">Handles executing commands on the database such as getting data from the database.</li>
</ul></div><p>Database commands are expressed in a special language that has been
standardized across many different database vendors to allow us to learn
a single database language. The database language is called
<em>Structured Query Language</em> or <em>SQL</em> for
short.</p>
<p><a class="reference external" href="http://en.wikipedia.org/wiki/SQL">http://en.wikipedia.org/wiki/SQL</a></p>

            <div class="runestone alert alert-warning">
            <ul data-component="multiplechoice" data-question_label="21.4.4" data-multipleanswers="false"  id="dbCreate_MC_SQL"  style="visibility: hidden;">
            <p>Q-4: SQL stands for ___________.</p>

            <li data-component="answer" data-correct id="dbCreate_MC_SQL_opt_a">Structured Query Language</li><li data-component="feedback">SQL is the acronym for <b>S</b>tructured <b>Q</b>uery <b>L</b>anguage.</li>
            
            <li data-component="answer"  id="dbCreate_MC_SQL_opt_b">Simple Query Language</li><li data-component="feedback">Not quite.</li>
            
            <li data-component="answer"  id="dbCreate_MC_SQL_opt_c">Synchronized Query Language</li><li data-component="feedback">Try again.</li>
            
            <li data-component="answer"  id="dbCreate_MC_SQL_opt_d">Simple Query Lingua</li><li data-component="feedback">Not quite.</li>
            

            </ul>
            </div>
            <p>In our example, we are executing two SQL commands in our database. As a
convention, we will show the SQL keywords in uppercase and the parts of
the command that we are adding (such as the table and column names) will
be shown in lowercase.</p>
<p>The first SQL command removes the <code class="docutils literal notranslate"><span class="pre">Tracks</span></code> table from the
database if it exists. This pattern is simply to allow us to run the
same program to create the <code class="docutils literal notranslate"><span class="pre">Tracks</span></code> table over and over again
without causing an error. Note that the <code class="docutils literal notranslate"><span class="pre">DROP</span> <span class="pre">TABLE</span></code> command
deletes the table and all of its contents from the database (i.e., there
is no “undo”).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;DROP TABLE IF EXISTS Tracks &#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The second command creates a table named <code class="docutils literal notranslate"><span class="pre">Tracks</span></code> with a text
column named <code class="docutils literal notranslate"><span class="pre">title</span></code> and an integer column named
<code class="docutils literal notranslate"><span class="pre">plays</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE Tracks (title TEXT, plays INTEGER)&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now that we have created a table named <code class="docutils literal notranslate"><span class="pre">Tracks</span></code>, we can put
some data into that table using the SQL <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> operation.
Again, we begin by making a connection to the database and getting a
<code class="docutils literal notranslate"><span class="pre">cursor</span></code> object. We can then execute SQL commands using the cursor.</p>
<p>The SQL <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> command indicates which table we are using
and then defines a new row by listing the fields we want to include
<code class="docutils literal notranslate"><span class="pre">(title,</span> <span class="pre">plays)</span></code> followed by the <code class="docutils literal notranslate"><span class="pre">VALUES</span></code> we want
placed in the new row. We specify the values as question marks <code class="docutils literal notranslate"><span class="pre">(?,</span>
<span class="pre">?)</span></code> to indicate that the actual values are passed in as a tuple
<code class="docutils literal notranslate"><span class="pre">(</span> <span class="pre">'My</span> <span class="pre">Way',</span> <span class="pre">15</span> <span class="pre">)</span></code> as the second parameter to the
<code class="docutils literal notranslate"><span class="pre">execute()</span></code> call.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sqlite3</span>

<span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;music.sqlite&#39;</span><span class="p">)</span>
<span class="n">cur</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>

<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;INSERT INTO Tracks (title, plays) VALUES (?, ?)&#39;</span><span class="p">,</span>
    <span class="p">(</span><span class="s1">&#39;Thunderstruck&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;INSERT INTO Tracks (title, plays) VALUES (?, ?)&#39;</span><span class="p">,</span>
    <span class="p">(</span><span class="s1">&#39;My Way&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">))</span>
<span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Tracks:&#39;</span><span class="p">)</span>
<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT title, plays FROM Tracks&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">cur</span><span class="p">:</span>
     <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

<span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;DELETE FROM Tracks WHERE plays &lt; 100&#39;</span><span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

<span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>First we <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> two rows into our table and use
<code class="docutils literal notranslate"><span class="pre">commit()</span></code> to force the data to be written to the database
file.</p>
<div class="figure align-default">
<img alt="Rows in a Table" src="../_images/tracks.svg" /></div>
<p>Then we use the <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> command to retrieve the rows we just
inserted from the table. On the <code class="docutils literal notranslate"><span class="pre">SELECT</span></code> command, we indicate
which columns we would like <code class="docutils literal notranslate"><span class="pre">(title,</span> <span class="pre">plays)</span></code> and indicate
which table we want to retrieve the data from. After we execute the
<code class="docutils literal notranslate"><span class="pre">SELECT</span></code> statement, the cursor is something we can loop
through in a <code class="docutils literal notranslate"><span class="pre">for</span></code> statement. For efficiency, the cursor does
not read all of the data from the database when we execute the
<code class="docutils literal notranslate"><span class="pre">SELECT</span></code> statement. Instead, the data is read on demand as we
loop through the rows in the <code class="docutils literal notranslate"><span class="pre">for</span></code> statement.</p>
<p>The output of the program is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Tracks</span><span class="p">:</span>
<span class="p">(</span><span class="s1">&#39;Thunderstruck&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="p">(</span><span class="s1">&#39;My Way&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>
</pre></div>
</div>
<p>Our <code class="docutils literal notranslate"><span class="pre">for</span></code> loop finds two rows, and each row is a Python tuple
with the first value as the <code class="docutils literal notranslate"><span class="pre">title</span></code> and the second value as
the number of <code class="docutils literal notranslate"><span class="pre">plays</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note: You may see strings starting with <code class="docutils literal notranslate"><span class="pre">u'</span></code> in other books or on the Internet.
This was an indication in Python 2 that the strings are <em>Unicode</em> strings that are capable
of storing non-Latin character sets. In Python 3, all strings are unicode
strings by default.</p>
</div>
<p>At the very end of the program, we execute an SQL command to
<code class="docutils literal notranslate"><span class="pre">DELETE</span></code> the rows we have just created so we can run the
program over and over. The <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> command shows the use of
a <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clause that allows us to express a selection
criterion so that we can ask the database to apply the command to only
the rows that match the criterion. In this example the criterion happens
to apply to all the rows so we empty the table out so we can run the
program repeatedly. After the <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> is performed, we also
call <code class="docutils literal notranslate"><span class="pre">commit()</span></code> to force the data to be removed from the
database.</p>

        <div class="runestone" style="max-width: none;">
        <div data-component="parsons" id="dbCreate_PP" class="alert alert-warning parsons" >
        <div class="parsons_question parsons-text" >
    <p>Put the following code in order to create a cursor, make a table called “Cats” with
two text columns (“Name” and “Breed”). Then add the rows for Whiskers, Ruby, and Milo in
the table and commit that change.  Finally select all the rows and print them before closing the cursor.</p>

        </div>
        <pre  class="parsonsblocks" data-question_label="21.4.5"   data-adaptive="true"      data-numbered="left"  style="visibility: hidden;">
        import sqlite3

conn = sqlite3.connect('pets.sqlite')
cur = conn.cursor()
---
cur.execute('DROP TABLE IF EXISTS Cats')
cur.execute('CREATE TABLE Tracks (name TEXT, breed INTEGER)')
---
cur.execute('INSERT INTO Cats (name, breed) VALUES (?, ?)',
    ('Whiskers', 'Ragdoll'))
cur.execute('INSERT INTO Cats (name, breed) VALUES (?, ?)',
    ('Ruby', 'Persian'))
cur.execute('INSERT INTO Cats (name, breed) VALUES (?, ?)',
    ('Milo', 'Russian Blue'))
---
conn.commit()
---
print('Cats:')
cur.execute('SELECT name, breed FROM Cats')
---
for row in cur:
     print(row)
---
cur.close()
        </pre>
        </div>
        </div>
    <dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>SQLite actually does allow some flexibility in the type of data stored in a column,
but we will keep our data types strict in this chapter so the concepts apply equally
to other database systems such as MySQL</p>
</dd>
</dl>
</div>


  <div id="scprogresscontainer">
    You have attempted <span id="scprogresstotal"></span> of <span id="scprogressposs"></span> activities on this page <div id="subchapterprogress" aria-label="Page progress"></div>
  </div>

  <ul role="navigation" class="nextprev-list nextprev-list" aria-label="Change page">
<li id="relations-prev" class="navLink" title='Previous Section - 21.3. Database Browser for SQLite' data-toggle="tooltip">
  <a href="dbBrowserSQLite.html" aria-label="Previous - 21.3. Database Browser for SQLite">
    <i class='prevNav glyphicon glyphicon-chevron-left'  style="top:50%; transform:translateY(-50%)translateX(-50%); left: 50%; color:black;"></i>
  </a>
</li>

  <li id="relations-next" class="navLink" title='Next Section - 21.5. Structured Query Language summary' data-toggle="tooltip" >
    <a href="SQLsummary.html" aria-label="Next - 21.5. Structured Query Language summary">
      <i id="relationsNextIcon" class='nextNav glyphicon glyphicon-chevron-right' style="top:50%; transform:translateY(-50%)translateX(-50%); left: 50%; color:black; "></i>
    </a>
  </li>
</ul>

<script>
window.addEventListener('load', (event) => {
  $('#relations-prev').tooltip({'placement': 'right', 'delay': { show: 100, hide: 50}});
  $('#relations-next').tooltip({'placement': 'left', 'delay': { show: 100, hide: 50}});
});
</script>
  
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      
      
      <span id='numuserspan'></span><span class='loggedinuser'></span>
      
      
      | <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2020 - Based on Python for Everybody.
      Created using <a href="http://runestoneinteractive.org/">Runestone</a> .
    </p>
  </div>
</footer>




<script> 
  window.addEventListener('load', (event) => {
    runestoneComponents.getSwitch(); 
  });
</script>


  </body>
</html>